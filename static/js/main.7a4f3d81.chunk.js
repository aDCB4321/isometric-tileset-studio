(this["webpackJsonpisometric-tileset-studio"]=this["webpackJsonpisometric-tileset-studio"]||[]).push([[0],{21:function(e,t,a){},22:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(15),s=a.n(r),o=(a(21),a(3)),h=a(2),l=a(4),c=a(8),u=a(7),d=(a(22),a(16)),g=a(10),b=a(1),v=a(12),p=a(6),f=a.n(p),y=function(){function e(t){if(Object(h.a)(this,e),t||(t={r:0,g:0,b:0,a:255}),t instanceof e||void 0!==t.r&&void 0!==t.a)this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;else{var a=f()(t);this.r=Math.floor(a.red()),this.g=Math.floor(a.green()),this.b=Math.floor(a.blue()),this.a=Math.floor(255*a.valpha)}}return Object(l.a)(e,[{key:"darken",value:function(t){return new e(f.a.rgb(this.r,this.g,this.b).alpha(this.a/255).darken(t))}},{key:"lighten",value:function(t){return new e(f.a.rgb(this.r,this.g,this.b).alpha(this.a/255).lighten(t))}},{key:"saturate",value:function(t){return new e(f.a.rgb(this.r,this.g,this.b).alpha(this.a/255).saturate(t))}},{key:"desaturate",value:function(t){return new e(f.a.rgb(this.r,this.g,this.b).alpha(this.a/255).desaturate(t))}},{key:"toString",value:function(){return this.toRgbaString()}},{key:"toRgbaString",value:function(){return"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")")}},{key:"toHexString",value:function(){return new f.a({r:this.r,g:this.g,b:this.b}).alpha(this.a/255).hex()}}],[{key:"create",value:function(e,t,a,n){return new this({r:e,g:t,b:a,a:n})}},{key:"equals",value:function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}]),e}(),j=y.create(0,0,0,0),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,e),this.x=t,this.y=a}return Object(l.a)(e,[{key:"toString",value:function(){return"(".concat(this.x,",").concat(this.y,")")}}]),e}(),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,e),this.width=t,this.height=a}return Object(l.a)(e,[{key:"toString",value:function(){return"(".concat(this.width,"x").concat(this.height,")")}}]),e}(),C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(h.a)(this,e),this.inner=!1,this.size=Math.floor(t||0),this.color=a||j,this.inner=n}return Object(l.a)(e,[{key:"asInner",value:function(){return this.inner=!0,this}},{key:"asOuter",value:function(){return this.inner=!1,this}},{key:"isDrawable",value:function(){return this.size>0||this.color.a>0}}]),e}(),x=function e(t,a,n,i){Object(h.a)(this,e),this.top=t||new C(0),this.right=a||new C(0),this.bottom=n||new C(0),this.left=i||new C(0)},w=function(){function e(t,a,n,i,r,s){Object(h.a)(this,e),this.base=new y(t),this.dark=new y(a),this.darker=new y(n),this.light=new y(i),this.lighter=new y(r),this.border=new y(s)}return Object(l.a)(e,null,[{key:"generate",value:function(e){var t=new y(e);return new this(t,t.saturate(.2).darken(.2),t.saturate(.2).darken(.4),t.saturate(.1).lighten(.2),t.saturate(.4).lighten(.4),new y("#000000"))}}]),e}(),k=Object(v.a)("canvas"),S=Object(v.a)("ctx"),z=Object(v.a)("imageData"),L=function(){function e(t){Object(h.a)(this,e),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object(b.a)(this,k)[k]=t,Object(b.a)(this,S)[S]=Object(b.a)(this,k)[k].getContext("2d"),Object(b.a)(this,S)[S].scale(5,5),Object(b.a)(this,z)[z]=Object(b.a)(this,S)[S].getImageData(0,0,Object(b.a)(this,k)[k].width,Object(b.a)(this,k)[k].height)}return Object(l.a)(e,[{key:"getColorIndex",value:function(e,t){return t*Object(b.a)(this,z)[z].width*4+4*e}},{key:"getColorAt",value:function(e,t){var a=this.getColorIndex(e,t),n=a,i=a+1,r=a+2,s=a+3,o={r:Object(b.a)(this,z)[z].data[n],g:Object(b.a)(this,z)[z].data[i],b:Object(b.a)(this,z)[z].data[r],a:Object(b.a)(this,z)[z].data[s]};if(void 0===o.r||void 0===o.g||void 0===o.b||void 0===o.a){var h="Pixel does not exist at "+new m(e,t);return console.error(h,o),null}return new y(o)}},{key:"drawIsometricGrid",value:function(){}},{key:"isOutOfBounds",value:function(e,t){return e<0||e>this.getWidth()||t<0||t>this.getHeight()}},{key:"getWidth",value:function(){return Object(b.a)(this,z)[z].width}},{key:"getHeight",value:function(){return Object(b.a)(this,z)[z].height}},{key:"getSize",value:function(){return new O(Object(b.a)(this,z)[z].width,Object(b.a)(this,z)[z].height)}},{key:"clearCanvas",value:function(){Object(b.a)(this,S)[S].clearRect(0,0,this.getWidth(),this.getHeight()),Object(b.a)(this,z)[z]=Object(b.a)(this,S)[S].getImageData(0,0,this.getWidth(),this.getHeight())}},{key:"setColorToCanvasPixel",value:function(e,t,a){var n=this.getColorIndex(e,t);Object(b.a)(this,z)[z].data[n]=Math.floor(a.r),Object(b.a)(this,z)[z].data[n+1]=Math.floor(a.g),Object(b.a)(this,z)[z].data[n+2]=Math.floor(a.b),Object(b.a)(this,z)[z].data[n+3]=Math.floor(a.a)}},{key:"putPixel",value:function(e,t,a,n){if(this.isOutOfBounds(e,t))return!1;if(1===n)return this.setColorToCanvasPixel(e,t,a),!0;for(var i=0;i<=n-1;i++)for(var r=0;r<=n-1;r++)this.setColorToCanvasPixel(e+i,t+r,a)}},{key:"putEdge",value:function(e){for(var t=e.from.x,a=e.from.y,n=e.to.x,i=e.to.y,r=Math.abs(n-t),s=t<n?1:-1,o=Math.abs(i-a),h=a<i?1:-1,l=(r>o?r:-o)/2;this.putPixel(t,a,e.strokeColor,1),t!==n||a!==i;){var c=l;c>-r&&(l-=o,t+=s),c<o&&(l+=r,a+=h)}}},{key:"putFloodFillQ",value:function(e,t,a){var n=this,i=j;if(!this.isOutOfBounds(e,t)&&!y.equals(a,i)){var r=this.getColorAt(e,t);if(null===r||!1!==y.equals(r,i)){this.setColorToCanvasPixel(e,t,a);var s=[];for(s.push(new m(e,t));s.length>0;){var o=s.shift();[new m(o.x-1,o.y),new m(o.x+1,o.y),new m(o.x,o.y+1),new m(o.x,o.y-1)].forEach((function(e){null!==(r=n.getColorAt(e.x,e.y))&&y.equals(r,i)&&(n.setColorToCanvasPixel(e.x,e.y,a),s.push(new m(e.x,e.y)))}))}}}}},{key:"putSurface",value:function(e){for(var t in e.edges)this.putEdge(e.edges[t])}},{key:"putPolyhedron",value:function(e){for(var t in e.surfaces)this.putSurface(e.surfaces[t]);for(var a in e.surfaces){var n=e.surfaces[a].center;this.putFloodFillQ(n.x,n.y,e.surfaces[a].fillColor)}}},{key:"update",value:function(){Object(b.a)(this,S)[S].putImageData(Object(b.a)(this,z)[z],0,0)}},{key:"isPositionInPolygon",value:function(e,t,a){for(var n=a.length,i=n-1,r=!1,s=0;s<n;s++)a[s][1]>t!==a[i][1]>t&&e<a[s][0]+(a[i][0]-a[s][0])*(t-a[s][1])/(a[i][1]-a[s][1])&&(r=!r),i=s;return r}},{key:"drawPolygon",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t&&null===a)throw Error("Stroke and fill color cannot be both null.");for(var n=0,i=1,r=2,s=3,o=e.map((function(e){return[Math.floor(e.x),Math.floor(e.y)]})),h=o.map((function(e){return e[0]})),l=o.map((function(e){return e[1]})),c=Math.min.apply(Math,Object(g.a)(h)),u=Math.max.apply(Math,Object(g.a)(h)),b=Math.min.apply(Math,Object(g.a)(l)),v=Math.max.apply(Math,Object(g.a)(l)),p=[],f=c;f<=u;f++)for(var y=b;y<=v;y++)void 0===p[f]&&(p[f]=[]),p[f][y]=n,this.isPositionInPolygon(f,y,o)&&(p[f][y]=s,null!==a&&this.putPixel(f,y,a,1));if(null===t)return p;for(var j=c;j<=u;j++)for(var m=b;m<=v;m++)if(!(p[j][m]<s))for(var O=[[j-t.left.size,m,t.left],[j,m-t.top.size,t.top],[j+t.right.size,m,t.right],[j,m+t.bottom.size,t.bottom]],C=0;C<O.length;C++){var x=Object(d.a)(O[C],3),w=x[0],k=x[1],S=x[2];S.isDrawable(),void 0===p[w]&&(p[w]=[]),void 0===p[w][k]&&(p[w][k]=n),p[w][k]<s&&(S.inner?(p[w][k]=r,this.putPixel(j,m,S.color,1)):(p[w][k]=i,this.putPixel(w,k,S.color,1)))}return p}},{key:"drawIsometricCube",value:function(e){var t=[e.tileWidth,e.tileHeight,e.sizeX,e.sizeY,e.sizeZ],a=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=a/n,h=[e.rotation,e.rotation/o],l=h[0],c=h[1],u=[e.posX,e.posY+n/2,a/2,n/2],d=u[0],g=u[1],b=u[2],v=u[3],p=(i-=b)/o,f=(s-=b)/o,y=new C(0).asInner(),j=y,O=y,k=y;e.stroke||(e.stroke=y);var S=null,z=null,L=null,P=null;if(e.baseColor){var I=w.generate(e.baseColor);S=I.base,z=I.dark,L=I.darker,P=I.light}if(e.stroke.isDrawable()){j=new C(e.stroke.size,P,e.stroke.inner);var M=Math.ceil(e.stroke.size/2),T=Math.floor(e.stroke.size/2);M>0&&(O=new C(M,P,e.stroke.inner)),T>0&&(k=new C(T+=1,P,e.stroke.inner))}var N=e.stroke,Y=[new m(d+l,g+c),new m(d+b-l,g-v+c),new m(d+a-l,g-c),new m(d+b+l,g+v-c)],G=[new m(d+l,g+r+c),Y[0],Y[3],new m(d+b+l,g+v+r-c)],X=[new m(d+a-l,g+r-c),Y[2],Y[3],G[3]];Y[1].x+=s,Y[1].y-=f,Y[2].x+=s,Y[2].y-=f,X[0].x+=s,X[0].y-=f,Y[0].x-=i,Y[0].y-=p,Y[1].x-=i,Y[1].y-=p,G[0].x-=i,G[0].y-=p,this.drawPolygon(Y,new x(N,null,null,null),S),this.drawPolygon(G,new x(null,null,N,N),z),this.drawPolygon(X,new x(null,N,N,null),L),this.drawPolygon([G[0],G[1],G[2],G[3]],new x(j,j,j,O),null),this.drawPolygon([X[0],X[1],X[2],X[3]],new x(j,j,j,k),null),this.drawPolygon([Y[0],Y[1],Y[2],X[0],X[3],G[0]],new x(e.stroke,e.stroke,e.stroke,e.stroke),null)}}]),e}(),P=a(0),I=new function e(t,a,n,i,r,s,o,l,c,u){Object(h.a)(this,e),this.posX=t,this.posY=a,this.tileWidth=n,this.tileHeight=i,this.sizeX=r,this.sizeY=s,this.sizeZ=o,this.rotation=l,this.stroke=c,this.baseColor=u}(128,128,128,64,64,64,64,0,new C(1,y.create(0,0,0,255),!0),new y("rgb(27,250,172)")),M=640,T=640,N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).index=e.index,n.options=e.options,n.canvasRef=new i.a.createRef,n.onDraw=e.onDraw,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.painter||(this.painter=new L(this.canvasRef.current)),this.draw(),this.onDraw(this.options,this.index,this)}},{key:"render",value:function(){return Object(P.jsx)("div",{className:"layer",style:{zIndex:this.index+10},children:Object(P.jsx)("canvas",{className:"editable-canvas",ref:this.canvasRef,width:M,height:T})},this.index)}},{key:"draw",value:function(){this.painter.drawIsometricCube(this.options),this.painter.update()}}]),a}(i.a.Component),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).updateCoolDownTimeout=null,n.updateTimeoutDelay=100,n.keyCount=0,n.updateForm=n.updateForm.bind(Object(o.a)(n)),n.handleInputNumChange=n.handleInputNumChange.bind(Object(o.a)(n)),n.handleBaseColorChange=n.handleBaseColorChange.bind(Object(o.a)(n)),n.handleStrokeColorChange=n.handleStrokeColorChange.bind(Object(o.a)(n)),n.handleStrokeSizeChange=n.handleStrokeSizeChange.bind(Object(o.a)(n)),n.handleZoomChange=n.handleZoomChange.bind(Object(o.a)(n)),n.handleGridChange=n.handleGridChange.bind(Object(o.a)(n)),n.addLayer=n.addLayer.bind(Object(o.a)(n)),n.onLayerChange=n.onLayerChange.bind(Object(o.a)(n)),n.handleGridSnapChange=n.handleGridSnapChange.bind(Object(o.a)(n)),n.downloadLayers=n.downloadLayers.bind(Object(o.a)(n)),n.copyLayers=n.copyLayers.bind(Object(o.a)(n)),n.handlePosXChange=n.handlePosXChange.bind(Object(o.a)(n)),n.handlePosYChange=n.handlePosYChange.bind(Object(o.a)(n)),n.viewportContainer=i.a.createRef(),n.layersContainer=i.a.createRef(),n.canvasGrid=i.a.createRef(),n.state={zoom:1.2,layers:[I],snapToGrid:!0,currentLayer:0},n}return Object(l.a)(a,[{key:"getCurrentOptions",value:function(){return this.state.layers[this.state.currentLayer]}},{key:"updateForm",value:function(e,t){}},{key:"componentDidMount",value:function(){var e=this.getCurrentOptions();this.drawGrid(e.tileWidth,e.tileHeight),this.handleZoomChange({target:{value:this.state.zoom}}),this.registerScrollOnDrag()}},{key:"render",value:function(){var e=this,t=this.getCurrentOptions(),a=Math.floor(t.tileWidth/2),n=Math.floor(a/2),i=Math.floor(t.tileHeight/2),r=this.state.snapToGrid?a:8,s=Math.floor(r/2),o=this.state.snapToGrid?i:8;return Object(P.jsxs)("div",{className:"ips-app",children:[Object(P.jsx)("header",{className:"ips-menu ips-menu-top",children:Object(P.jsx)("h1",{children:"Isometric Pixel Studio"})}),Object(P.jsx)("div",{className:"ips-menu ips-menu-left",children:Object(P.jsxs)("div",{className:"ips-form",children:[Object(P.jsxs)("div",{className:"ips-form-group",children:[Object(P.jsxs)("header",{children:["Zoom: ",10*Math.round(10*this.state.zoom)," %"]}),Object(P.jsx)("label",{children:Object(P.jsx)("input",{name:"zoom",type:"range",min:1,max:4,step:.1,value:this.state.zoom,onChange:this.handleZoomChange})})]}),Object(P.jsxs)("div",{className:"ips-form-group",children:[Object(P.jsxs)("header",{children:["Grid: ",t.tileWidth,"x",t.tileHeight,"px"]}),Object(P.jsxs)("label",{children:["Tile width:",Object(P.jsx)("input",{name:"tileWidth",type:"range",min:0,max:320,step:8,value:t.tileWidth,onChange:this.handleGridChange})]}),Object(P.jsxs)("label",{children:["Tile height:",Object(P.jsx)("input",{name:"tileHeight",type:"range",min:0,max:240,step:8,value:t.tileHeight,onChange:this.handleGridChange})]}),Object(P.jsxs)("label",{children:["Snap to grid:",Object(P.jsx)("input",{style:{width:"30px"},name:"snapToGrid",type:"checkbox",checked:!0===this.state.snapToGrid,value:1,onChange:this.handleGridSnapChange})]}),Object(P.jsxs)("label",{children:["Rotation (",t.rotation,"%):",Object(P.jsx)("input",{name:"rotation",type:"range",min:-100,max:100,step:1,value:t.rotation,onChange:this.handleGridChange})]})]}),Object(P.jsxs)("div",{className:"ips-form-group",children:[Object(P.jsx)("header",{children:"Layers"}),Object(P.jsxs)("label",{children:["Current layer:",Object(P.jsx)("select",{onChange:this.onLayerChange,name:"layer",value:this.state.currentLayer,children:function(){for(var t=[],a=0;a<e.state.layers.length;a++)t.push(Object(P.jsx)("option",{value:a,children:a},a));return t}()})]}),Object(P.jsxs)("label",{children:[Object(P.jsx)("button",{name:"addLayer",onClick:this.addLayer,children:"Add Layer"}),Object(P.jsx)("button",{name:"removeLayer",children:"Remove Layer"})]})]}),Object(P.jsx)("button",{className:"primary-btn",name:"copy",onClick:this.copyLayers,children:"Copy to clipboard"}),Object(P.jsx)("button",{className:"primary-btn",name:"download",onClick:this.downloadLayers,children:"Download"})]})}),Object(P.jsx)("div",{className:"ips-viewport",ref:this.viewportContainer,children:Object(P.jsxs)("div",{id:"ips_layers",className:"ips-layers",ref:this.layersContainer,children:[function(){for(var t=[],a=0;a<e.state.layers.length;a++)t.push(e.createLayer(a,e.state.layers[a]));return t}(),Object(P.jsx)("div",{className:"layer layer-grid",style:{zIndex:1},children:Object(P.jsx)("canvas",{width:M,height:T,ref:this.canvasGrid})})]})}),Object(P.jsx)("div",{className:"ips-menu ips-menu-right",children:Object(P.jsxs)("div",{className:"ips-form",children:[Object(P.jsxs)("div",{className:"ips-form-group",children:[Object(P.jsxs)("header",{children:["Position (",t.posX,",",t.posY,")"]}),Object(P.jsxs)("label",{children:["X:",Object(P.jsx)("input",{name:"posX",type:"range",min:0,max:M-a,step:r,"data-movestepy":o,value:t.posX,onChange:this.handlePosXChange})]}),Object(P.jsxs)("label",{children:["Y:",Object(P.jsx)("input",{name:"posY",type:"range",min:0,max:T-2*i,step:o,"data-movestepx":r,value:t.posY,onChange:this.handlePosYChange})]})]}),Object(P.jsxs)("div",{className:"ips-form-group",children:[Object(P.jsxs)("header",{children:["Size (",t.sizeX," x ",t.sizeZ," x ",t.sizeY,")"]}),Object(P.jsxs)("label",{children:["X:",Object(P.jsx)("input",{name:"sizeX",type:"range",min:0,max:M-n,step:s,value:t.sizeX,onChange:this.handleInputNumChange})]}),Object(P.jsxs)("label",{children:["Z:",Object(P.jsx)("input",{name:"sizeZ",type:"range",min:0,max:M-n,step:s,value:t.sizeZ,onChange:this.handleInputNumChange})]}),Object(P.jsxs)("label",{children:["Y:",Object(P.jsx)("input",{name:"sizeY",type:"range",min:0,max:T-n,step:o,value:t.sizeY,onChange:this.handleInputNumChange})]})]}),Object(P.jsxs)("div",{className:"ips-form-group",children:[Object(P.jsx)("header",{children:"Colors"}),Object(P.jsxs)("label",{children:["Base Color:",Object(P.jsx)("input",{name:"baseColor",type:"color",value:t.baseColor.toHexString(),onChange:this.handleBaseColorChange})]}),Object(P.jsxs)("label",{children:["Stroke Color:",Object(P.jsx)("input",{name:"strokeColor",type:"color",value:t.stroke.color.toHexString(),onChange:this.handleStrokeColorChange})]}),Object(P.jsxs)("label",{children:["Stroke Size:",Object(P.jsx)("input",{name:"strokeSize",type:"range",min:0,max:10,value:t.stroke.size,onChange:this.handleStrokeSizeChange})]})]})]})})]})}},{key:"onLayerChange",value:function(e){this.triggerStateChange("currentLayer",parseInt(e.target.value))}},{key:"createLayer",value:function(e,t){var a=Object(P.jsx)(N,{onDraw:this.updateForm,index:e,options:t},e+"-"+this.keyCount);return this.keyCount++,a}},{key:"addLayer",value:function(){var e=this.state.layers[this.state.currentLayer],t=Object.assign({},e,{posY:e.posY-e.sizeY}),a=this.state.layers.length,n=this.state.layers;n.push(t),this.triggerPropsStateChange({layers:n,currentLayer:a})}},{key:"registerScrollOnDrag",value:function(){var e,t,a,n,i=this.viewportContainer.current,r=!1;i.addEventListener("mousedown",(function(s){r=!0,i.classList.add("active"),e=s.pageX-i.offsetLeft,t=s.pageY-i.offsetTop,a=i.scrollLeft,n=i.scrollTop})),i.addEventListener("mouseleave",(function(){r=!1,i.classList.remove("active")})),i.addEventListener("mouseup",(function(){r=!1,i.classList.remove("active")})),i.addEventListener("mousemove",(function(s){if(r){s.preventDefault();var o=s.pageX-i.offsetLeft,h=s.pageY-i.offsetTop,l=o-e,c=h-t;i.scrollLeft=a-l,i.scrollTop=n-c}}))}},{key:"triggerPropsStateChange",value:function(e,t){t||(t=function(){}),this.setState((function(a){var n=Object.assign({},a,e);return t(n),n}))}},{key:"triggerStateChange",value:function(e,t,a){a||(a=function(){}),this.setState((function(n){var i=Object.assign({},n);return i[e]=t,a(i),i}))}},{key:"triggerOptionsStateChange",value:function(e,t,a){a||(a=function(){}),a.bind(this),this.setState((function(n){var i=Object.assign({},n);return i.layers[i.currentLayer][e]=t,a(i),i}))}},{key:"triggerOptionsStateChangeMultiple",value:function(e,t){t||(t=function(){}),t.bind(this),this.setState((function(a){var n=Object.assign({},a);return n.layers[n.currentLayer]=Object.assign({},n.layers[n.currentLayer],e),t(n),n}))}},{key:"handlePosXChange",value:function(e){var t=this.getCurrentOptions(),a=parseInt(e.target.value),n=t.posY;a<this.getCurrentOptions().posX?n-=parseInt(e.target.dataset.movestepy):a>this.getCurrentOptions().posX&&(n+=parseInt(e.target.dataset.movestepy)),this.triggerOptionsStateChangeMultiple({posX:a,posY:n})}},{key:"handlePosYChange",value:function(e){var t=this.getCurrentOptions(),a=parseInt(e.target.value),n=t.posX;a<this.getCurrentOptions().posY?n+=parseInt(e.target.dataset.movestepx):a>this.getCurrentOptions().posY&&(n-=parseInt(e.target.dataset.movestepx)),this.triggerOptionsStateChangeMultiple({posX:n,posY:a})}},{key:"handleInputNumChange",value:function(e){this.triggerOptionsStateChange(e.target.name,parseInt(e.target.value))}},{key:"handleBaseColorChange",value:function(e){this.triggerOptionsStateChange(e.target.name,new y(e.target.value))}},{key:"handleStrokeColorChange",value:function(e){var t=this.state.layers[this.state.currentLayer].stroke;t.color=new y(e.target.value),this.triggerOptionsStateChange("stroke",t)}},{key:"handleStrokeSizeChange",value:function(e){var t=this.state.layers[this.state.currentLayer].stroke;t.size=parseInt(e.target.value),this.triggerOptionsStateChange("stroke",t)}},{key:"handleZoomChange",value:function(e){var t=this,a=parseFloat(e.target.value);this.triggerStateChange("zoom",a,(function(e){t.layersContainer.current.style.zoom=e.zoom}))}},{key:"handleGridChange",value:function(e){var t=this;this.setState((function(a){var n=Object.assign({},a);n.layers[n.currentLayer][e.target.name]=parseInt(e.target.value);var i=n.layers[n.currentLayer];return t.drawGrid(i.tileWidth,i.tileHeight),n}))}},{key:"handleGridSnapChange",value:function(e){this.triggerStateChange("snapToGrid",!!e.target.checked)}},{key:"combineLayers",value:function(){var e=document.createElement("canvas");e.width=M,e.height=T;var t=e.getContext("2d"),a=document.getElementsByClassName("editable-canvas");return Array.prototype.forEach.call(a,(function(e){t.drawImage(e,0,0,e.width,e.height)})),e}},{key:"copyLayers",value:function(e){void 0!==navigator.clipboard&&void 0!==navigator.clipboard.write?this.combineLayers().toBlob((function(e){return navigator.clipboard.write([new ClipboardItem({"image/png":e})])})):this.downloadLayers(e)}},{key:"downloadLayers",value:function(e){var t=this.combineLayers().toDataURL("image/png"),a=document.createElement("a");a.download="isometric-studio-export.png",a.target="_blank",a.href=t,a.click()}},{key:"drawGrid",value:function(e,t){var a=this.canvasGrid.current,n=a.getContext("2d"),i=a.width,r=a.height,s="#a6a6a6";n.translate(i/2,-r);var o=function(a,i,r){this.x=a,this.y=i,this.z=r,this.draw=function(){n.save(),n.translate((this.x-this.y)*e/2,(this.x+this.y)*t/2),n.beginPath(),n.moveTo(0,-this.z*t),n.lineTo(e/2,t/2-this.z*t),n.lineTo(0,t-r*t),n.lineTo(-e/2,t/2-this.z*t),n.closePath(),n.fillStyle="#fff",n.fill(),n.beginPath(),n.moveTo(e/2,t/2-this.z*t),n.lineTo(0,t-this.z*t),n.lineTo(0,t),n.lineTo(e/2,t/2),n.closePath(),n.fillStyle=s,n.fill(),n.beginPath(),n.moveTo(-e/2,t/2-this.z*t),n.lineTo(0,t-this.z*t),n.lineTo(0,t),n.lineTo(-e/2,t/2),n.closePath(),n.fillStyle=s,n.fill(),n.restore()}};!function(){n.clearRect(0,0,i,r);for(var e=0;e<100;e++)for(var t=0;t<100;t++){new o(e,t,1).draw()}}()}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(Y,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.7a4f3d81.chunk.js.map